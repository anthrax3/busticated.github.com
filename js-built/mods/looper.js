define([],function(){var a=[],b=1e3/60,c=!1,d=null,e=0,f=function(){return c},g=function(a,d){return typeof a=="function"&&j(a),f()?a:(c=!0,b=d||b,m(),a)},h=function(){c=!1,clearTimeout(d)},i=function(a){if(typeof a=="undefined")return b;b=a,h(),g()},j=function(b){return a.push(b),b},k=function(b){for(var c=0,d=a.length;c<d;c+=1)b===a[c]&&a.splice(c,1)},l=function(){a=[]},m=function(){var c=(new Date).getTime(),g;if(!f())return;for(var h=0,i=a.length;h<i;h+=1)typeof a[h]=="function"&&a[h](new Date)===!1&&a.splice(h,1);g=Math.max(0,b-(c-e)),d=setTimeout(m,g),e=c+g};return{isRunning:f,start:g,stop:h,clear:l,add:j,remove:k,rate:i}})