define(["jquery"],function(a){var b={target:"#js-wordguess",letterClass:".main-title-letter",mode:"full",onComplete:a.noop,availChars:"abcdefhiklmnorstuvwxz1234567890.,!$&?",text:!1},c=function(d){if(!(this instanceof c))return new c(d);this.configs=a.extend({},b,d);if(typeof this.configs.onComplete!="function")throw new Error("onComplete option must be a function");this.$target=a(this.configs.target),this.tmpl='<span class="'+this.configs.letterClass.replace(".","")+'">{{char}}</span>',this.text=this.configs.text||this.$target.text(),this.letters=this.text.split(""),this.$target.text(""),this.setMode(this.configs.mode)};return c.prototype={guess:function(){var a=this.configs,b=Math.floor(Math.random()*a.availChars.length);return a.availChars.substring(b,b+1)},setMode:function(a){switch(a.toLowerCase()){case"reverse":this.idx=this.letters.length-1,this.incr=-1,this.word=this.text.split(""),this.configs.mode="reverse";break;case"full":this.idx=0,this.incr=1,this.word=[],this.configs.mode="full";break;default:this.letters=this.text.split(""),this.idx=this.letters.length-1,this.incr=0,this.word=this.text.split("")}return this},isMatch:function(a,b){return a===this.text.substring(b,b+1)},isLastChar:function(a){return a===this.text.length-1},isFirstChar:function(){return this.idx===-1},isComplete:function(a,b){return this.configs.mode==="full"&&this.isMatch(a,b)&&this.isLastChar(b)||this.configs.mode==="reverse"&&this.isMatch(a,b)&&this.isFirstChar()},render:function(){var a=this.guess(),b=this.idx;return this.word[b]=this.tmpl.replace("{{char}}",a),this.isMatch(a,b)&&(this.word[b]=this.configs.mode==="reverse"?"":a,this.idx+=this.incr,this.configs.mode==="reverse"&&this.letters.pop()),this.$target.empty().html(this.word.join("")),this.isComplete(a,b)?(this.configs.onComplete(),!1):!0}},c})