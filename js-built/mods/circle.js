define(["jquery","mods/stage"],function(a,b){var c={color:"rgba(255, 255, 0, 0.5)",lineWidth:40,strokeStyle:"rgba(0, 0, 0, 0.1)",segments:15,radius:50,x:60,y:60},d=function(a,b){return Math.floor(Math.random()*(b-a+1)+a)},e=b().$canvas,f=b().ctx,g=function(b){var d={};return d.settings=a.extend({},c,b),d.x=d.settings.x,d.y=d.settings.y,d.currentSegment=0,d.toRadians=function(a){return Math.PI/180*a},d.getTick=function(a){var b=this.toRadians(360)/this.settings.segments;return b*a},d.setStyles=function(a,b){return f.lineWidth=a||this.settings.lineWidth,f.strokeStyle=b||this.settings.strokeStyle,this},d.segment=function(a,b){return a=a||this.getTick(this.currentSegment),b=b||this.getTick(this.currentSegment+1),f.beginPath(),f.arc(this.x,this.y,this.settings.radius,a,b),f.stroke(),f.closePath(),this},d.draw=function(){this.setStyles();while(this.currentSegment<this.settings.segments)this.segment(this.getTick(this.currentSegment),this.getTick(this.currentSegment+1)),this.currentSegment+=1;return this.currentSegment=0,g.onComplete(),this},d.drawSegment=function(){this.setStyles(),this.segment(this.getTick(this.currentSegment),this.getTick(this.currentSegment+1)),this.currentSegment+=1;if(this.currentSegment===this.settings.segments)return g.reset(this.settings.radius,e.width(),e.height()),g.onComplete(),!1},d};return g.defaults=c,g.reset=function(a,b,e){c.x=d(a,b-a),c.y=d(a,e-a)},g.onComplete=a.noop,g})